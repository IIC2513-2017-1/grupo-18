= form_for(bet) do |f|
  - if bet.errors.any?
    #error_explanation
      %h2
        = pluralize(bet.errors.count, "error")
        prohibited this bet from being saved:
      %ul
        - bet.errors.full_messages.each do |message|
          %li= message
  .field
    = f.label :execution_date
    = f.datetime_select :execution_date
  .field{style: "display:inline-block"}
    = f.label :name , {style: "display:inline-block"}
    = f.text_field :name , {style: "display:inline-block"}
  .field{style: "display:inline-block"}
    = f.label :description , {style: "display:inline-block"}
    = f.text_field :description , {style: "display:inline-block"}
  .field
    = f.label :avatar
    = f.file_field :avatar
    - if f.object.avatar?
      = image_tag f.object.avatar.medium.url
      = f.label :remove_avatar
      = f.check_box :remove_avatar
  %h4 Opciones de apuesta
  .row.additional_info
    .meh
      .doh{style: "display:inline-block"}
        %h4
          ="Descripci√≥n"
        = text_field_tag "bet_options[{index}][description]",nil, class: 'form-control', placeholder: "Ej; Gana la cato"
      .doh{style: "display:inline-block"}
        %h4
          ="Porcentaje"
        = text_field_tag "bet_options[{index}][percentage]",nil, class: 'form-control',data:currency_field
      .doh{style: "display:inline-block"}
        .field
          .button.addAdditionalInfo.tiny{start_at: 0, target: ".additional_infos"} Agregar
          .button.red.deleteAdditionalInfo.tiny{style:"display:none"} Eliminar
  -begin
    .additional_infos
      - @bonos.each_with_index do |b,index|
        .row.additional_info
          .field
            = text_field_tag "bet_options[#{index}][description]", b.name, class: 'form-control'
          .field
            = text_field_tag "bet_options[#{index}][percentage]", b.value, class: 'form-control',data:currency_field
          .field
            .button.red.deleteAdditionalInfo.tiny Eliminar
  -rescue


  .actions
    = f.submit

:javascript
  $(function() {
    var delete_additional_info;
    delete_additional_info = function() {
      return $(".deleteAdditionalInfo").click(function() {
        var row;
        row = $(this).parents(".additional_info");
        return row.remove();
      });
    };
    delete_additional_info();
    return $(".addAdditionalInfo").click(function() {
      var index, new_row, row;
      index = $(this).attr("start_at");
      row = $(this).parents(".additional_info");
      new_row = row.clone().prependTo($(this).attr("target"));
      new_row.find("input").each(function() {
        return $(this).attr("name", $(this).attr("name").replace("{index}", index));
      });
      new_row.find(".deleteAdditionalInfo").show();
      new_row.find(".addAdditionalInfo").hide();
      new_row.find("h4").remove();
      delete_additional_info();
      $(this).attr("start_at", parseInt(index) + 1);
      return row.find("input").val("");
    });
  });
